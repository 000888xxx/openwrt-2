-- Copyright (C) 2019 Twinzo1 <1282055288@qq.com>

<%
local fs   = require "nixio.fs"
local sys  = require "luci.sys"
local uci = require "luci.model.uci".cursor()
local mac_addr = {}
mac_addr.enable = uci:get_first("dogcom_rp", "dogcom_rp", "enable")
mac_addr.mac = uci:get_first("dogcom_rp", "dogcom_rp", "mac")
mac_addr.mac_a = uci:get_first("dogcom_rp", "dogcom_rp", "mac_a")
mac_addr.macc= uci:get_first("dogcom_rp", "dogcom_rp", "macc")

%>
<div class="cbi-value"><label class="cbi-value-title" >当前Mac地址</label>
<div class="cbi-value-field">
        <input type="text" class="input" style="float: left; margin-right: 5px;" maxlength="17" size="15" value="<%=mac_addr.mac_a%>"/>
	<input class="cbi-button cbi-input-button cbi-button-apply" type="submit" name="<%=cbid%>addr" id="<%=cbid%>addr" value="获取" />

</div>
</div>

<div class="cbi-value" id="<%=cbid%>"><label class="cbi-value-title" for="<%=cbid%>">Mac地址</label>	
<div class="cbi-value-field">
        <input type="text" name="<%=cbid%>" id="<%=cbid%>" class="cbi-input-text" data-type="macaddr" style="float: left; margin-right: 5px;" maxlength="17" size="15" value="<%=mac_addr.mac%>"/>
	<input class="cbi-button cbi-input-button cbi-button-apply" type="submit" name="<%=cbid%>" id="<%=cbid%>" value="克隆" />	
	<input class="cbi-button cbi-input-button cbi-button-apply" type="submit" name="<%=cbid%>un" id="<%=cbid%>un" value="随机" />
</div>
</div>

<div class="cbi-value" id="<%=cbid%>c" style="display: none;"><label class="cbi-value-title" for="<%=cbid%>">Mac地址</label>	
<div class="cbi-value-field">
        <input type="text" name="<%=cbid%>c" id="<%=cbid%>c" class="cbi-input-text" data-type="macaddr" style="float: left; margin-right: 5px;" value="<%=mac_addr.macc%>"/>
</div>
</div>

<div class="cbi-value"><label class="cbi-value-title" > </label>

<script type="text/javascript">
window.onload=function(){
  var obt=document.getElementById("bt");
  var odiv=document.getElementById("<%=cbid%>");
  var odi=document.getElementById("<%=cbid%>c");
  obt.onclick=function(){
    if(odiv.style.display=="none"){
      odiv.style.display="block";
      odi.style.display="none";
      obt.value="手动输入";
    }
    else{
      odiv.style.display="none";
      odi.style.display="block";
      obt.value="自动生成";
    }
  }
}
</script>
<input type="button" class="cbi-button cbi-input-button cbi-button-apply" id="bt" value="手动输入"/>
</div>
