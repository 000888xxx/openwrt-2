<!--Copyright (C) 2019 Twinzo1 <1282055288@qq.com>-->

<%
local fs   = require "nixio.fs"
local http  = require "luci.http"
local ip  = require "luci.ip"
local sys = require "luci.sys"
local uci = require "luci.model.uci".cursor()
local mac_addr={}
mac_addr.mac = uci:get_first("dogcom", "dogcom", "macaddr")
luci.ip.neighbors({ family = 4,dest = 'http.getenv("REMOTE_ADDR") or "?"' }, function(n) 
	mac_addr.login_mac=(n.mac) 
end)%>

<div class="cbi-value" ><label class="cbi-value-title" for="<%=cbid%>">Mac地址</label>	
<div class="cbi-value-field">
	<script type="text/javascript">
	function dogcom_mac(){  //获取mac地址
		var mac="<%=mac_addr.mac%>";
		document.getElementById("<%=cbid%>").value = mac;
		}
	function cmac(){ //获取登陆mac地址
		var clone = "<%=mac_addr.login_mac%>";
		document.getElementById("<%=cbid%>").value = clone;		
		}
	</script>
  	<input name="<%=cbid%>" id="<%=cbid%>" type="text" class="cbi-input-text" data-type="macaddr" value="<%=mac_addr.mac%>"/>
	<body onload="dogcom_mac()">
	<input class="cbi-button cbi-input-button cbi-button-apply" type="button" id="clone" value="克隆" onclick="cmac()" />
</div>
</div>
